extends layout

block content
  h1 Collection+JSON Explorer
  p Viewing #{url}

  form(action="/render")
    p
      label URL:
        input(name="url", value="#{url}")
      input(type="submit", value="Render")

  form(action="http://redbot.org/?")
    p
      input(name="uri", value="#{url}", type="hidden")
      input(type="submit", value="Check with redbot.org")

  ul
    li
      a(href="#meta") Meta
    li
      a(href="#items") Items
    li
      a(href="#headers") Headers
    li
      a(href="#body") Raw body
    li
      a(href="#formatted-body") Formatted body

  a(id="meta")
    h1
      a(href="#meta") Meta

    table
      tr
        td Version
        td #{doc.version}
      tr
        td URI
        td
          if typeof doc.uri == 'string'
            a(href="#{doc.uri}") #{doc.uri}
          else
            span No URI

  a(id="items")
    h1
      a(href="#items") Items
  each item, i in doc.items
    a(id="item-#{i+1}")
      h2
        a(href="#item-#{i+1}") Item ##{i+1}
    h3 Data
      ul
      each data in item.data
        li #{data.name}: #{data.value}

  a(id="headers")
    h1
      a(href="#headers") Headers
  pre
    table
      each value, key in headers
        tr
          td #{key}:
          td #{value}

  a(id="body")
    h1
      a(href="#body") Raw body
  pre= raw

  a(id="formatted-body")
    h1
      a(href="#formatted-body") Formatted body
  pre= formattedRaw
